# Zenvexa API - Environment Configuration
# Copy this file to .env and update values for your environment
# NEVER commit the actual .env file to version control

# ===================================================================
# CORE APPLICATION SETTINGS
# ===================================================================

# Flask Secret Key for session management and CSRF protection
# Generate a strong random key: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-super-secret-key-here-change-this-in-production

# Application environment
# Options: development, testing, staging, production
FLASK_ENV=development

# Debug mode (set to False in production)
DEBUG=True

# Application port (default: 5000)
PORT=5000

# Application host (default: 127.0.0.1 for local development)
HOST=127.0.0.1

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================

# Database URL format examples:
# SQLite: sqlite:///zenvexa.db
# PostgreSQL: postgresql://user:password@localhost:5432/zenvexa
# MySQL: mysql://user:password@localhost:3306/zenvexa

# For development (SQLite)
DATABASE_URL=sqlite:///zenvexa.db

# For production (PostgreSQL - uncomment and configure)
# DATABASE_URL=postgresql://zenvexa_user:your_password@localhost:5432/zenvexa_db

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ===================================================================
# SECURITY SETTINGS
# ===================================================================

# JWT Secret Key for API authentication
# Generate separately from Flask secret key
JWT_SECRET_KEY=your-jwt-secret-key-here-change-this-too

# JWT Expiration time in seconds (1 hour = 3600)
JWT_EXPIRATION_DELTA=3600

# JWT Refresh token expiration in seconds (30 days = 2592000)
JWT_REFRESH_EXPIRATION_DELTA=2592000

# Password hashing rounds (higher = more secure but slower)
BCRYPT_LOG_ROUNDS=12

# Enable HTTPS redirects (set to True in production)
FORCE_HTTPS=False

# CORS settings
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-API-Key
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS

# ===================================================================
# API SETTINGS
# ===================================================================

# Default API rate limits
API_RATE_LIMIT_PER_MINUTE=100
API_RATE_LIMIT_PER_HOUR=1000
API_RATE_LIMIT_PER_DAY=10000

# API key expiration settings
API_KEY_EXPIRATION_DAYS=365

# Maximum failed login attempts before temporary lockout
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_MINUTES=15

# ===================================================================
# EMAIL CONFIGURATION
# ===================================================================

# Email service provider
# Options: smtp, sendgrid, mailgun, aws_ses
EMAIL_PROVIDER=smtp

# SMTP Settings (if using SMTP)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=True
SMTP_USE_SSL=False

# Default sender email
DEFAULT_FROM_EMAIL=noreply@zenvexa.com
DEFAULT_FROM_NAME=Zenvexa API

# ===================================================================
# PAYMENT SETTINGS (FUTURE PAYPRO INTEGRATION)
# ===================================================================

# Payment webhook secret for verifying webhook signatures
PAYMENT_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# PayPro API credentials (future use)
PAYPRO_API_KEY=your_paypro_api_key_here
PAYPRO_API_SECRET=your_paypro_api_secret_here
PAYPRO_WEBHOOK_URL=https://api.zenvexa.com/webhooks/paypro

# Stripe settings (alternative payment provider)
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# Payment webhooks endpoint secret
WEBHOOK_SIGNING_SECRET=your-webhook-signing-secret-here

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================

# Log level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file location
LOG_FILE=logs/zenvexa.log

# Maximum log file size in bytes (10MB = 10485760)
LOG_MAX_BYTES=10485760

# Number of backup log files to keep
LOG_BACKUP_COUNT=5

# Enable SQL query logging (set to True for debugging)
SQLALCHEMY_ECHO=False

# ===================================================================
# REDIS CONFIGURATION (FOR CACHING AND RATE LIMITING)
# ===================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Redis password (if required)
REDIS_PASSWORD=

# Redis connection settings
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=True

# Cache settings
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300  # 5 minutes
CACHE_KEY_PREFIX=zenvexa

# ===================================================================
# MONITORING AND ANALYTICS
# ===================================================================

# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Google Analytics tracking ID (optional)
GOOGLE_ANALYTICS_ID=

# Hotjar tracking ID (optional)
HOTJAR_ID=

# ===================================================================
# FILE UPLOAD SETTINGS
# ===================================================================

# Maximum file upload size in bytes (10MB = 10485760)
MAX_CONTENT_LENGTH=10485760

# Allowed file extensions
UPLOAD_ALLOWED_EXTENSIONS=json,yaml,txt,csv

# Upload folder
UPLOAD_FOLDER=uploads

# Enable file upload virus scanning
ENABLE_VIRUS_SCAN=False

# ===================================================================
# DEVELOPMENT SETTINGS
# ===================================================================

# Enable debug toolbar (development only)
DEBUG_TB_ENABLED=False

# Enable SQL profiling (development only)
SQLALCHEMY_RECORD_QUERIES=False

# Profiler restrictions (development only)
PROFILE_RESTRICTIONS=

# ===================================================================
# PRODUCTION SETTINGS
# ===================================================================

# Production server settings
WORKERS=4
WORKER_TIMEOUT=30
WORKER_CLASS=gunicorn.workers.sync.SyncWorker

# Enable compression
COMPRESS_ALGORITHM=gzip
COMPRESS_LEVEL=6

# Static file settings
STATIC_FOLDER=static
STATIC_URL_PATH=/static

# ===================================================================
# SECURITY HEADERS
# ===================================================================

# Content Security Policy
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# Enable security headers
SECURITY_HEADERS=True

# HSTS max age (1 year = 31536000)
HSTS_MAX_AGE=31536000

# ===================================================================
# BACKUP SETTINGS
# ===================================================================

# Enable automatic backups
ENABLE_BACKUPS=True

# Backup frequency (daily, weekly, monthly)
BACKUP_FREQUENCY=daily

# Backup retention days
BACKUP_RETENTION_DAYS=30

# Backup storage location
BACKUP_STORAGE=local  # Options: local, s3, gcs

# S3 backup settings (if using S3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_BUCKET_NAME=
AWS_REGION=us-east-1

# ===================================================================
# LOCAL DEVELOPMENT OVERRIDES
# ===================================================================

# These settings are only loaded in development mode
# They override the main settings for local development

# Local database (SQLite)
LOCAL_DATABASE_URL=sqlite:///zenvexa_dev.db

# Local Redis (if not available)
LOCAL_REDIS_URL=redis://localhost:6379/1

# Local email (console backend for testing)
LOCAL_EMAIL_BACKEND=console

# Disable HTTPS locally
LOCAL_FORCE_HTTPS=False

# Enable debug mode locally
LOCAL_DEBUG=True

# ===================================================================
# TESTING SETTINGS
# ===================================================================

# Test database (in-memory SQLite)
TEST_DATABASE_URL=sqlite:///:memory:

# Test Redis (separate database)
TEST_REDIS_URL=redis://localhost:6379/15

# Enable test mode
TESTING=False

# Mock external services in tests
MOCK_PAYMENTS=True
MOCK_EMAILS=True

# ===================================================================
# DEPLOYMENT SETTINGS
# ===================================================================

# Docker settings
DOCKER_IMAGE_TAG=latest
DOCKER_REGISTRY=zenvexa

# Kubernetes settings
KUBE_NAMESPACE=zenvexa
KUBE_CLUSTER_NAME=zenvexa-cluster

# CI/CD settings
CI_ENVIRONMENT=development
CI_PIPELINE_ID=
CI_COMMIT_SHA=

# ===================================================================
# NOTES FOR BEGINNERS
# ===================================================================

# 1. Copy this file to .env (never commit .env to git)
# 2. Update SECRET_KEY and JWT_SECRET_KEY with strong random values
# 3. Set DEBUG=False in production
# 4. Use strong passwords for all services
# 5. Configure email settings for password resets
# 6. Set up payment webhooks before going live
# 7. Configure monitoring services for production
# 8. Use environment-specific .env files (.env.production, .env.staging)
# 9. Keep backups of your .env file in a secure location
# 10. Rotate secrets regularly

# ===================================================================
# GENERATING SECURE KEYS
# ===================================================================

# To generate a secure secret key, run:
# python -c "import secrets; print(secrets.token_hex(32))"

# To generate a secure JWT secret, run:
# python -c "import secrets; print(secrets.token_urlsafe(64))"

# To generate webhook secrets, run:
# python -c "import secrets; print('whsec_' + secrets.token_urlsafe(32))"
